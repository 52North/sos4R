<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sos4R: Wrapper Functions for easier SOS access • sos4R</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="sos4R: Wrapper Functions for easier SOS access">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sos4R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sos4R-vignette-01-quickstart.html">sos4R: Accessing Sensor Observation Services from R - Quickstart</a>
    </li>
    <li>
      <a href="../articles/sos4R-vignette-02-ogc-sos.html">sos4R: OGC SWE and SOS</a>
    </li>
    <li>
      <a href="../articles/sos4R-vignette-03-sos-operations.html">sos4R: SOS Operations</a>
    </li>
    <li>
      <a href="../articles/sos4R-vignette-04-extensions.html">sos4R: Extending package functions and advanced configuration</a>
    </li>
    <li>
      <a href="../articles/sos4R-vignette-05-wrapper-functions.html">sos4R: Wrapper Functions for easier SOS access</a>
    </li>
    <li>
      <a href="../articles/sos4R-vignette-99-services.html">sos4R: List of SOSs</a>
    </li>
  </ul>
</li>
<li>
  <a href="../DEV-README.html">Developer Docs</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/52North/sos4R">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="sos4R-vignette-05-wrapper-functions_files/htmlwidgets-1.3/htmlwidgets.js"></script><script src="sos4R-vignette-05-wrapper-functions_files/jquery-1.12.4/jquery.min.js"></script><link href="sos4R-vignette-05-wrapper-functions_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="sos4R-vignette-05-wrapper-functions_files/leaflet-1.3.1/leaflet.js"></script><link href="sos4R-vignette-05-wrapper-functions_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="sos4R-vignette-05-wrapper-functions_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="sos4R-vignette-05-wrapper-functions_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="sos4R-vignette-05-wrapper-functions_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="sos4R-vignette-05-wrapper-functions_files/leaflet-binding-2.0.2/leaflet.js"></script><script src="sos4R-vignette-05-wrapper-functions_files/leaflet-providers-1.1.17/leaflet-providers.js"></script><script src="sos4R-vignette-05-wrapper-functions_files/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script><link href="sos4R-vignette-05-wrapper-functions_files/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="sos4R-vignette-05-wrapper-functions_files/HomeButton-0.0.1/home-button.js"></script><script src="sos4R-vignette-05-wrapper-functions_files/HomeButton-0.0.1/easy-button-src.min.js"></script><link href="sos4R-vignette-05-wrapper-functions_files/PopupTable-0.0.1/popup.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>sos4R: Wrapper Functions for easier SOS access</h1>
                        <h4 class="author">Daniel Nüst</h4>
            <address class="author_afil">
      Institute for Geoinformatics, University of Münster, Germany.<br><a class="author_email" href="mailto:#"></a><a href="mailto:daniel.nuest@uni-muenster.de" class="email">daniel.nuest@uni-muenster.de</a>
      </address>
                  
            <h4 class="date">2019-05-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/52North/sos4R/blob/master/vignettes/sos4R-vignette-05-wrapper-functions.Rmd"><code>vignettes/sos4R-vignette-05-wrapper-functions.Rmd</code></a></small>
      <div class="hidden name"><code>sos4R-vignette-05-wrapper-functions.Rmd</code></div>

    </div>

    
    
<p><code>sos4R</code> includes a collection of convenience functions which wrap the complex SOS interface with its specific terms (e.g. FOI, procedure). The wrapper function use more generic terms easily accessible for all users, especially without a strong knowledge of the OGC standards of the Sensor Web Enablement (see <a href="sos4R-vignette-02-ogc-sos.html">“OGC SWE and SOS”</a> vignette for details).</p>
<p>In general, these functions always return an object of class <code>data.frame</code>, even if the result is only a list, in which case the <code>data.frame</code> has one column.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"sos4R"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">niwaHydro &lt;-<span class="st"> </span><span class="kw"><a href="../reference/SOS.html">SOS</a></span>(<span class="dt">url =</span> <span class="st">"https://hydro-sos.niwa.co.nz/"</span>, <span class="dt">binding =</span> <span class="st">"KVP"</span>, <span class="dt">useDCPs =</span> <span class="ot">FALSE</span>, <span class="dt">version =</span> <span class="st">"2.0.0"</span>)</a></code></pre></div>
<div id="phenomena" class="section level2">
<h2 class="hasAnchor">
<a href="#phenomena" class="anchor"></a>Phenomena</h2>
<p>The function <code><a href="../reference/phenomena.html">phenomena(..)</a></code> provides information about observed phenomena and time periods of data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">phenomena &lt;-<span class="st"> </span><span class="kw"><a href="../reference/phenomena.html">phenomena</a></span>(<span class="dt">sos =</span> niwaHydro)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(phenomena)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; 'data.frame':    3 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt;  $ phenomenon: chr  "Discharge" "Height of Gauge (River Stage)" "pH"</span></a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">phenomena</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt;                      phenomenon</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; 1                     Discharge</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; 2 Height of Gauge (River Stage)</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; 3                            pH</span></a></code></pre></div>
<p>The retrieved data can be extended to the time intervals and site identifier for which data is available.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/phenomena.html">phenomena</a></span>(<span class="dt">sos =</span> niwaHydro, <span class="dt">includeTemporalBBox =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt;                      phenomenon           timeBegin             timeEnd</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; 1                     Discharge 1951-05-31 12:00:00 2019-05-17 11:00:00</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; 2 Height of Gauge (River Stage) 1904-01-09 11:00:00 2019-05-17 11:00:00</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; 3                            pH 1989-01-24 21:50:00 2018-09-11 21:00:00</span></a></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># not implemented - https://github.com/52North/sos4R/issues/83</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#phenomena(sos = niwaHydro, includeSiteId = TRUE)</span></a></code></pre></div>
<p>You can also add both temporal extent and sites.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># not implemented - https://github.com/52North/sos4R/issues/83</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#phenomena(sos = niwaHydro, includeTemporalBBox = TRUE, includeSiteId = TRUE)</span></a></code></pre></div>
</div>
<div id="sites" class="section level2">
<h2 class="hasAnchor">
<a href="#sites" class="anchor"></a>Sites</h2>
<p>The function <code><a href="../reference/sites.html">sites(..)</a></code> provides information about sites where observations are made, including metadata about the sites (e.g. location). The returned object is a <code>SpatialPointsDataFrame</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">sites &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sites.html">sites</a></span>(<span class="dt">sos =</span> niwaHydro)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">sites</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;              coordinates siteID</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; 1  (176.5078, -38.17637)  15341</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; 2  (176.9951, -38.00514)  15514</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; 3   (177.6323, -37.8637)  16501</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 4   (177.621, -38.19973)  16502</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 5   (177.8756, -38.4616)  19716</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 6    (177.5617, -38.415)  19734</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 7  (176.4122, -39.29098)  23005</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; 8  (176.3306, -39.37992)  23104</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; 9  (176.2218, -39.43711)  23106</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; 10 (176.8725, -39.59642)  23150</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 11 (175.1916, -41.05086)  29808</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 12 (175.3246, -39.37149)  33117</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 13 (174.0475, -35.27634)   3722</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; 14 (174.2618, -39.28117)  39508</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; 15  (174.733, -38.62336)  40810</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt; 16   (174.7488, -37.228)  43602</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt; 17  (173.6881, -35.2738)  47804</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; 18 (172.6272, -40.74598)  52003</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; 19  (172.8224, -41.2579)  57009</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt; 20   (173.565, -41.3035)  58902</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt; 21  (172.923, -41.89551)  60114</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt; 22 (172.9648, -42.37542)  62103</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt; 23  (172.9064, -42.4573)  62105</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt; 24 (173.1414, -42.63103)  64610</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt; 25 (172.5415, -42.79039)  65104</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt; 26  (171.7018, -43.1404)  66405</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt; 27 (171.8951, -43.46383)  68001</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt; 28 (171.6358, -43.50605)  68526</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt; 29  (170.4906, -44.7248)  71103</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt; 30  (169.748, -46.23728)  75207</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt; 31 (169.2974, -43.94255)  86802</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">#&gt; 32  (171.018, -42.95499)  90612</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">#&gt; 33 (171.2978, -42.45329)  91401</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="co">#&gt; 34 (171.7874, -42.35537)  91403</span></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="co">#&gt; 35 (172.3864, -41.76348)  93202</span></a>
<a class="sourceLine" id="cb7-39" data-line-number="39"><span class="co">#&gt; 36 (171.6994, -41.83425)  93203</span></a>
<a class="sourceLine" id="cb7-40" data-line-number="40"><span class="co">#&gt; 37 (172.2202, -41.25421)  95102</span></a>
<a class="sourceLine" id="cb7-41" data-line-number="41"><span class="co">#&gt; 38 (168.7971, -46.38951)    DN5</span></a></code></pre></div>
<p>To see all sites, even the ones without any data, use the <code>empty</code> parameter.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">sitesEmpty &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sites.html">sites</a></span>(<span class="dt">sos =</span> niwaHydro, <span class="dt">empty =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(sitesEmpty)[<span class="dv">10</span><span class="op">:</span><span class="dv">13</span>,]</a></code></pre></div>
<p>You can retrieve additional metadata about the phenomena and the time period for which data is available. Including temporal extent implies inclusion of phenomena. In the next chunks the object is coerced to a <code>date.frame</code> to get a tabular view.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">sites_<span class="dv">1</span>_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sites.html">sites</a></span>(<span class="dt">sos =</span> niwaHydro, <span class="dt">includePhenomena =</span> <span class="ot">TRUE</span>)[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(sites_<span class="dv">1</span>_<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;   siteID Discharge Height.of.Gauge..River.Stage.    pH      lon       lat</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; 1  15341      TRUE                          TRUE FALSE 176.5078 -38.17637</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; 2  15514      TRUE                          TRUE FALSE 176.9951 -38.00514</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; 3  16501      TRUE                          TRUE FALSE 177.6323 -37.86370</span></a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># not fully implemented - temporal extent missing, see https://github.com/52North/sos4R/issues/93</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#as.data.frame(sites(sos = niwaHydro, includeTemporalBBox = TRUE)[1:3,])</span></a></code></pre></div>
<p>You can filter sites using phenomena and temporal extent.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="../reference/sites.html">sites</a></span>(<span class="dt">sos =</span> niwaHydro, <span class="dt">phenomena =</span> phenomena[<span class="dv">3</span>,]))</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt;    siteID      lon       lat</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt; 1   15341 176.5078 -38.17637</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt; 2   15514 176.9951 -38.00514</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; 3   16501 177.6323 -37.86370</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; 4   16502 177.6210 -38.19973</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; 5   19716 177.8756 -38.46160</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt; 6   19734 177.5617 -38.41500</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; 7   23005 176.4122 -39.29098</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; 8   23104 176.3306 -39.37992</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; 9   23106 176.2218 -39.43711</span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; 10  23150 176.8725 -39.59642</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt; 11  29808 175.1916 -41.05086</span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt; 12  33117 175.3246 -39.37149</span></a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="co">#&gt; 13   3722 174.0475 -35.27634</span></a>
<a class="sourceLine" id="cb11-16" data-line-number="16"><span class="co">#&gt; 14  39508 174.2618 -39.28117</span></a>
<a class="sourceLine" id="cb11-17" data-line-number="17"><span class="co">#&gt; 15  40810 174.7330 -38.62336</span></a>
<a class="sourceLine" id="cb11-18" data-line-number="18"><span class="co">#&gt; 16  43602 174.7488 -37.22800</span></a>
<a class="sourceLine" id="cb11-19" data-line-number="19"><span class="co">#&gt; 17  47804 173.6881 -35.27380</span></a>
<a class="sourceLine" id="cb11-20" data-line-number="20"><span class="co">#&gt; 18  52003 172.6272 -40.74598</span></a>
<a class="sourceLine" id="cb11-21" data-line-number="21"><span class="co">#&gt; 19  57009 172.8224 -41.25790</span></a>
<a class="sourceLine" id="cb11-22" data-line-number="22"><span class="co">#&gt; 20  58902 173.5650 -41.30350</span></a>
<a class="sourceLine" id="cb11-23" data-line-number="23"><span class="co">#&gt; 21  60114 172.9230 -41.89551</span></a>
<a class="sourceLine" id="cb11-24" data-line-number="24"><span class="co">#&gt; 22  62103 172.9648 -42.37542</span></a>
<a class="sourceLine" id="cb11-25" data-line-number="25"><span class="co">#&gt; 23  62105 172.9064 -42.45730</span></a>
<a class="sourceLine" id="cb11-26" data-line-number="26"><span class="co">#&gt; 24  64610 173.1414 -42.63103</span></a>
<a class="sourceLine" id="cb11-27" data-line-number="27"><span class="co">#&gt; 25  65104 172.5415 -42.79039</span></a>
<a class="sourceLine" id="cb11-28" data-line-number="28"><span class="co">#&gt; 26  66405 171.7018 -43.14040</span></a>
<a class="sourceLine" id="cb11-29" data-line-number="29"><span class="co">#&gt; 27  68001 171.8951 -43.46383</span></a>
<a class="sourceLine" id="cb11-30" data-line-number="30"><span class="co">#&gt; 28  68526 171.6358 -43.50605</span></a>
<a class="sourceLine" id="cb11-31" data-line-number="31"><span class="co">#&gt; 29  71103 170.4906 -44.72480</span></a>
<a class="sourceLine" id="cb11-32" data-line-number="32"><span class="co">#&gt; 30  75207 169.7480 -46.23728</span></a>
<a class="sourceLine" id="cb11-33" data-line-number="33"><span class="co">#&gt; 31  86802 169.2974 -43.94255</span></a>
<a class="sourceLine" id="cb11-34" data-line-number="34"><span class="co">#&gt; 32  90612 171.0180 -42.95499</span></a>
<a class="sourceLine" id="cb11-35" data-line-number="35"><span class="co">#&gt; 33  91401 171.2978 -42.45329</span></a>
<a class="sourceLine" id="cb11-36" data-line-number="36"><span class="co">#&gt; 34  91403 171.7874 -42.35537</span></a>
<a class="sourceLine" id="cb11-37" data-line-number="37"><span class="co">#&gt; 35  93202 172.3864 -41.76348</span></a>
<a class="sourceLine" id="cb11-38" data-line-number="38"><span class="co">#&gt; 36  93203 171.6994 -41.83425</span></a>
<a class="sourceLine" id="cb11-39" data-line-number="39"><span class="co">#&gt; 37  95102 172.2202 -41.25421</span></a>
<a class="sourceLine" id="cb11-40" data-line-number="40"><span class="co">#&gt; 38    DN5 168.7971 -46.38951</span></a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="../reference/sites.html">sites</a></span>(<span class="dt">sos =</span> niwaHydro, <span class="dt">begin =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.POSIXlt">as.POSIXct</a></span>(<span class="st">"1904-01-01"</span>), <span class="dt">end =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.POSIXlt">as.POSIXct</a></span>(<span class="st">"1905-12-31"</span>)))</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt;   siteID      lon       lat</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; 1  64610 173.1414 -42.63103</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; 2  66405 171.7018 -43.14040</span></a></code></pre></div>
<p>The <code>SpatialPointsDataFrame</code> allows access to coordinates with coordinate reference system (CRS).</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">sp<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sp/topics/coordinates">coordinates</a></span>(sites)[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt;           lon       lat</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt; [1,] 176.5078 -38.17637</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; [2,] 176.9951 -38.00514</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; [3,] 177.6323 -37.86370</span></a></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">sites<span class="op">@</span>proj4string</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; CRS arguments:</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt;  +init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; +towgs84=0,0,0</span></a></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">sp<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/sp/topics/bbox">bbox</a></span>(sites)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt;           min      max</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; lon 168.79712 177.8756</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; lat -46.38951 -35.2738</span></a></code></pre></div>
<p>This object can be directly used as input for various mapping libraries, e.g. <code>mapview</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/message">suppressPackageStartupMessages</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"mapview"</span>))</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/mapview/topics/mapView">mapview</a></span>(sites)</a></code></pre></div>
<div id="htmlwidget-282cd30910a70a54fb96" style="width:700px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-282cd30910a70a54fb96">{"x":{"options":{"minZoom":1,"maxZoom":100,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",1,"CartoDB.Positron",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.DarkMatter",2,"CartoDB.DarkMatter",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",3,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",4,"Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenTopoMap",5,"OpenTopoMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"createMapPane","args":["point",440]},{"method":"addCircleMarkers","args":[[-38.1763687133789,-38.0051383972168,-37.8637008666992,-38.1997299194336,-38.4616012573242,-38.4150009155273,-39.2909812927246,-39.3799209594727,-39.4371109008789,-39.5964202880859,-41.0508613586426,-39.3714904785156,-35.2763404846191,-39.2811698913574,-38.6233596801758,-37.2280006408691,-35.2738,-40.745979309082,-41.2579002380371,-41.3035011291504,-41.8955116271973,-42.3754196166992,-42.4572982788086,-42.631031036377,-42.7903900146484,-43.1403999328613,-43.4638290405273,-43.5060501098633,-44.7248001098633,-46.2372817993164,-43.9425506591797,-42.9549903869629,-42.4532890319824,-42.3553695678711,-41.7634811401367,-41.8342514038086,-41.2542114257813,-46.3895072937012],[176.507797241211,176.995101928711,177.632293701172,177.621002197266,177.875595092773,177.561706542969,176.412200927734,176.330596923828,176.221801757813,176.872497558594,175.191604614258,175.324600219727,174.047500610352,174.261795043945,174.733001708984,174.748794555664,173.68813,172.627197265625,172.822402954102,173.565002441406,172.923004150391,172.964797973633,172.906402587891,173.141403198242,172.54150390625,171.701797485352,171.895095825195,171.635803222656,170.490600585938,169.748001098633,169.297393798828,171.018005371094,171.297805786133,171.787399291992,172.38639831543,171.699401855469,172.220199584961,168.797119140625],6,null,"sites",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"point","stroke":true,"color":"#333333","weight":2,"opacity":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],"fill":true,"fillColor":["#481668","#481E70","#482778","#472F7E","#472F7E","#453882","#424086","#3F4889","#3C508B","#38588C","#355F8D","#31668E","#2E6D8E","#2C738E","#2C738E","#29798E","#27808E","#24868E","#228D8D","#20938C","#1F9A8A","#1FA188","#22A785","#27AD81","#27AD81","#2EB37C","#39B977","#44BF70","#52C569","#60CA60","#70CF57","#80D34D","#92D742","#A3DB36","#A3DB36","#B6DE2A","#C9E020","#DBE319"],"fillOpacity":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,["<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>1&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>15341&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>2&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>15514&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>3&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>16501&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>4&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>16502&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>5&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>19716&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>6&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>19734&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>7&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>23005&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>8&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>23104&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>9&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>23106&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>10&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>23150&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>11&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>29808&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>12&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>33117&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>13&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>3722&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>14&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>39508&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>15&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>40810&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>16&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>43602&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>17&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>47804&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>18&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>52003&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>19&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>57009&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>20&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>58902&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>21&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>60114&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>22&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>62103&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>23&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>62105&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>24&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>64610&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>25&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>65104&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>26&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>66405&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>27&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>68001&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>28&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>68526&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>29&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>71103&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>30&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>75207&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>31&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>86802&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>32&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>90612&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>33&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>91401&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>34&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>91403&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>35&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>93202&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>36&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>93203&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>37&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>95102&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>","<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"lib/popup/popup.css\"><\/head><body><div class=\"scrollableContainer\"><table class=\"popup scrollable\" id=\"popup\"><tr class='coord'><td><\/td><td><b>Feature ID<\/b><\/td><td align='right'>38&emsp;<\/td><\/tr><tr class='alt'><td>1<\/td><td><b>siteID&emsp;<\/b><\/td><td align='right'>DN5&emsp;<\/td><\/tr><tr><td>2<\/td><td><b>geometry&emsp;<\/b><\/td><td align='right'>sfc_POINT&emsp;<\/td><\/tr><\/table><\/div><\/body><\/html>"],{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},["15341","15514","16501","16502","19716","19734","23005","23104","23106","23150","29808","33117","3722","39508","40810","43602","47804","52003","57009","58902","60114","62103","62105","64610","65104","66405","68001","68526","71103","75207","86802","90612","91401","91403","93202","93203","95102","DN5"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[168.797119140625,-46.3895072937012,177.875595092773,-35.2738,"Zoom to sites","<strong> sites <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["CartoDB.Positron","CartoDB.DarkMatter","OpenStreetMap","Esri.WorldImagery","OpenTopoMap"],"sites",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#481668","#481E70","#482778","#472F7E","#472F7E","#453882","#424086","#3F4889","#3C508B","#38588C","#355F8D","#31668E","#2E6D8E","#2C738E","#2C738E","#29798E","#27808E","#24868E","#228D8D","#20938C","#1F9A8A","#1FA188","#22A785","#27AD81","#27AD81","#2EB37C","#39B977","#44BF70","#52C569","#60CA60","#70CF57","#80D34D","#92D742","#A3DB36","#A3DB36","#B6DE2A","#C9E020","#DBE319"],"labels":["15341","15514","16501","16502","19716","19734","23005","23104","23106","23150","29808","33117","3722","39508","40810","43602","47804","52003","57009","58902","60114","62103","62105","64610","65104","66405","68001","68526","71103","75207","86802","90612","91401","91403","93202","93203","95102","DN5"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"sites","extra":null,"layerId":null,"className":"info legend","group":"sites"}]}],"limits":{"lat":[-46.3895072937012,-35.2738],"lng":[168.797119140625,177.875595092773]}},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      //map.on('click', function (e) {\n      //  var txt = document.querySelector('.lnlt').textContent;\n      //  console.log(txt);\n      //  //txt.innerText.focus();\n      //  //txt.select();\n      //  setClipboardText(txt);\n      //});\n\n      function setClipboardText(text){\n      var id = 'mycustom-clipboard-textarea-hidden-id';\n      var existsTextarea = document.getElementById(id);\n\n      if(!existsTextarea){\n      console.log('Creating textarea');\n      var textarea = document.createElement('textarea');\n      textarea.id = id;\n      // Place in top-left corner of screen regardless of scroll position.\n      textarea.style.position = 'fixed';\n      textarea.style.top = 0;\n      textarea.style.left = 0;\n\n      // Ensure it has a small width and height. Setting to 1px / 1em\n      // doesn't work as this gives a negative w/h on some browsers.\n      textarea.style.width = '1px';\n      textarea.style.height = '1px';\n\n      // We don't need padding, reducing the size if it does flash render.\n      textarea.style.padding = 0;\n\n      // Clean up any borders.\n      textarea.style.border = 'none';\n      textarea.style.outline = 'none';\n      textarea.style.boxShadow = 'none';\n\n      // Avoid flash of white box if rendered for any reason.\n      textarea.style.background = 'transparent';\n      document.querySelector('body').appendChild(textarea);\n      console.log('The textarea now exists :)');\n      existsTextarea = document.getElementById(id);\n      }else{\n      console.log('The textarea already exists :3')\n      }\n\n      existsTextarea.value = text;\n      existsTextarea.select();\n\n      try {\n      var status = document.execCommand('copy');\n      if(!status){\n      console.error('Cannot copy text');\n      }else{\n      console.log('The text is now on the clipboard');\n      }\n      } catch (err) {\n      console.log('Unable to copy.');\n      }\n      }\n\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null}]}}</script>
</div>
<div id="data-at-sites" class="section level2">
<h2 class="hasAnchor">
<a href="#data-at-sites" class="anchor"></a>Data at sites</h2>
<p>The function <code><a href="../reference/siteList.html">siteList(..)</a></code> provides information about observed phenomena at sites and the time periods when data is available.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">siteList &lt;-<span class="st"> </span><span class="kw"><a href="../reference/siteList.html">siteList</a></span>(<span class="dt">sos =</span> niwaHydro)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(siteList)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt; 'data.frame':    38 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt;  $ siteID: chr  "15341" "15514" "16501" "16502" ...</span></a></code></pre></div>
<p>You can extend the information returned with these parameters:</p>
<ul>
<li>
<code>empty</code> to also show sites without data</li>
<li>
<code>includePhenomena</code> to add phenomena to the table (boolean)</li>
<li>
<code>includeTemporalBBox</code> to also show the time when data is available (boolean)</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="../reference/siteList.html">siteList</a></span>(<span class="dt">sos =</span> niwaHydro, <span class="dt">empty =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># under development - https://github.com/52North/sos4R/issues/90</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="co">#siteList(sos = niwaHydro, includePhenomena = TRUE, includeTemporalBBox = TRUE)</span></a></code></pre></div>
<p>You can reduce the results with these parameters:</p>
<ul>
<li>
<code>phenomena</code> is a vector of phenomena which must be measured at the sites</li>
<li>
<code>begin</code> and <code>end</code> define a time interval (date and time class objects) for which some data must be available (sites may have data outside the given interval)</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="../reference/siteList.html">siteList</a></span>(<span class="dt">sos =</span> niwaHydro,</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">         <span class="dt">phenomena =</span> phenomena<span class="op">$</span>phenomenon[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], <span class="co"># no effect with current data</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3">         <span class="dt">begin =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.POSIXlt">as.POSIXct</a></span>(<span class="st">"1950-01-01"</span>), <span class="dt">end =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.POSIXlt">as.POSIXct</a></span>(<span class="st">"1960-12-31"</span>)</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">         )</a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#&gt;    siteID</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co">#&gt; 1   15514</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="co">#&gt; 2   16501</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="co">#&gt; 3   16502</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="co">#&gt; 4   60114</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="co">#&gt; 5   62103</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="co">#&gt; 6   62105</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="co">#&gt; 7   64610</span></a>
<a class="sourceLine" id="cb20-13" data-line-number="13"><span class="co">#&gt; 8   65104</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="co">#&gt; 9   66405</span></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="co">#&gt; 10  75207</span></a></code></pre></div>
</div>
<div id="data-download" class="section level2">
<h2 class="hasAnchor">
<a href="#data-download" class="anchor"></a>Data download</h2>
<p>The function <code><a href="../reference/getData.html">getData(..)</a></code> retrieves the actual data and returns them in ready-to-use data structures from the <a href="https://cran.r-project.org/package=spacetime"><code>spacetime</code></a> package.</p>
<p>The returned data can be limited by thematical, spatial, and temporal filters. Thematical filtering (phenomena) support the values of the previous functions as inputs. Spatial filters are either sites, or a bounding box. Temporal filter is a time period during which observations are made.</p>
<p>Without a temporal extent, the used SOS only returns the last measurement.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">observationData &lt;-<span class="st"> </span><span class="kw"><a href="../reference/getData.html">getData</a></span>(<span class="dt">sos =</span> niwaHydro,</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">                           <span class="dt">phenomena =</span> phenomena<span class="op">$</span>phenomenon[<span class="dv">1</span>],</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">                           <span class="dt">sites =</span> siteList<span class="op">$</span>siteID[<span class="dv">1</span>],</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">                           <span class="dt">retrieveFOI =</span> <span class="ot">FALSE</span>, <span class="co"># TO BE FIXED</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5">                           )</a>
<a class="sourceLine" id="cb21-6" data-line-number="6"></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(observationData)</a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt; 'data.frame':    1 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt;  $ m^3/s: num 6.25</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="co">#&gt;   ..- attr(*, "unit of measurement")= chr "m^3/s"</span></a></code></pre></div>
<p>The result <code>data.frame</code> includes additional metadata.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/attributes">attributes</a></span>(observationData<span class="op">$</span><span class="st">`</span><span class="dt">m^3/s</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="co">#&gt; $`unit of measurement`</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="co">#&gt; [1] "m^3/s"</span></a></code></pre></div>
<p>Request more data with a temporal extent for all sites.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># under development - see https://github.com/52North/sos4R/issues/138 and https://github.com/52North/sos4R/issues/96</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="co">#observationData &lt;- getData(sos = niwaHydro,</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="co">#                           phenomena = phenomena$phenomenon[1],</span></a>
<a class="sourceLine" id="cb23-4" data-line-number="4"><span class="co">#                           sites = sites@data,</span></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="co">#                           begin = as.POSIXct("2000-01-01"),</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"><span class="co">#                           end = as.POSIXct("2000-01-02"),</span></a>
<a class="sourceLine" id="cb23-7" data-line-number="7"><span class="co">#                           inspect = TRUE,</span></a>
<a class="sourceLine" id="cb23-8" data-line-number="8"><span class="co">#                           retrieveFOI = FALSE, # TO BE FIXED</span></a>
<a class="sourceLine" id="cb23-9" data-line-number="9"><span class="co">#                           )</span></a>
<a class="sourceLine" id="cb23-10" data-line-number="10"><span class="co">#</span></a>
<a class="sourceLine" id="cb23-11" data-line-number="11"><span class="co">#str(observationData)</span></a></code></pre></div>
<p>The next example gets data for two phenomena a site.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># TO BE IMPLEMENTED: merge different observation types - see https://github.com/52North/sos4R/issues/96#issuecomment-493424151</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="co">#getData(sos = niwaHydro,</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="co">#        phenomena = phenomena$phenomenon[1:2],</span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="co">#        sites = siteList$siteID[1],</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="co">#        retrieveFOI = FALSE, # TO BE FIXED</span></a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="co">#        )</span></a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="co">#observationData &lt;- getData(sos = niwaHydro, phenomena = phenomena, sites = multipleSites)</span></a>
<a class="sourceLine" id="cb24-8" data-line-number="8"><span class="co">#str(observationData)</span></a></code></pre></div>
<p>You can also retrieve data for phenomena from multiple sites.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">multipleSites &lt;-<span class="st"> </span>siteList<span class="op">$</span>siteID[<span class="dv">35</span><span class="op">:</span><span class="dv">38</span>]</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="co"># TO BE IMPLEMENTED: merge different observation types</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="co">#observationData &lt;- getData(sos = niwaHydro, phenomena = phenomena, sites = multipleSites)</span></a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="co">#str(observationData)</span></a></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="co"># not implemented</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(observationData)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="co">#&gt;      m^3/s      </span></a>
<a class="sourceLine" id="cb26-4" data-line-number="4"><span class="co">#&gt;  Min.   :6.249  </span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="co">#&gt;  1st Qu.:6.249  </span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"><span class="co">#&gt;  Median :6.249  </span></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="co">#&gt;  Mean   :6.249  </span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="co">#&gt;  3rd Qu.:6.249  </span></a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="co">#&gt;  Max.   :6.249</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#phenomena">Phenomena</a></li>
      <li><a href="#sites">Sites</a></li>
      <li><a href="#data-at-sites">Data at sites</a></li>
      <li><a href="#data-download">Data download</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Daniel Nuest.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
